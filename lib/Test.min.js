var d=this.self||global;function f(a){this.a=a?a.clone():{}}function h(a,c){function e(){var a=b.shift();a&&a(g)}var b=Object.keys(a.a).map(function(b){return a.a[b]}),g=new j(b.length,function(a){c&&c(a)},{b:e});e()}function k(){var a=location.href.split("/");a.pop();return a.join("/")+"/"}var j=d.Task||require("uupaa.task.js"),l="process"in d,m="WorkerLocation"in d,n="document"in d,p="console"in d;f.name="Test";f.repository="https://github.com/uupaa/Test.js";
f.prototype.add=function(a){var c=this;a.forEach(function(a){c.a[a.name]=a});return this};f.prototype.clone=function(){var a={},c;for(c in this.a)a[c]=this.a[c];return a};
f.prototype.run=function(a){function c(){h(e,function(b){b?console.error("Browser error."):console.log("Browser ok.");document.body.style.backgroundColor=b?"red":"lime";Object.keys(e.a).forEach(function(a){if(!document.querySelector("#"+a)){var b=document.createElement("input");b.setAttribute("id",a);b.setAttribute("type","button");b.setAttribute("value",a+"()");b.setAttribute("onclick",a+"()");document.body.appendChild(b)}});a&&a(b,e)})}var e=this;n?(d.addEventListener("error",function(){document.body.style.backgroundColor=
"red"}),"complete"===document.readyState?c():d.addEventListener("load",c)):l?h(e,function(b){b?console.error("\u001b[31mNode error.\u001b[0m"):console.log("\u001b[32mNode ok.\u001b[0m");a&&a(b,e)}):m&&h(e,function(b){p&&(b?console.error("Worker error."):console.log("Worker ok."));b&&(d.errorMessage=b.message);a&&a(b,e)});return this};
f.prototype.worker=function(a,c){if(m||!("Worker"in d))a&&a(null,this);else{c=c||{};var e=this,b=c.src||"#worker";if("inline"===(c.type||"inline"))var g=document.querySelector(b),b=g&&"Blob"in d?(URL||webkitURL).createObjectURL(new Blob([g.textContent],{type:"application/javascript"})):"";b?(g=new Worker(b),g.onmessage=function(c){/^blob:/.test(b)&&(URL||webkitURL).revokeObjectURL(b);if(c=c.data.error)document.body.style.backgroundColor="red";a&&a(c?Error(c):null,e)},g.postMessage({baseDir:k()})):
a&&a(null,e);return this}};l&&(module.exports=f);d.Test?d.Test_=f:d.Test=f;
